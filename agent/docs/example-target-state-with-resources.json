{
  "apps": {
    "1001": {
      "appId": 1001,
      "appName": "iot-monitoring-stack",
      "services": [
        {
          "serviceId": 1,
          "serviceName": "mosquitto",
          "imageName": "eclipse-mosquitto:2",
          "config": {
            "image": "eclipse-mosquitto:2",
            "ports": ["1883:1883", "9001:9001"],
            "volumes": ["mosquitto-data:/mosquitto/data", "mosquitto-logs:/mosquitto/log"],
            "restart": "unless-stopped",
            "resources": {
              "limits": {
                "cpu": "0.5",
                "memory": "256Mi"
              },
              "requests": {
                "cpu": "0.25",
                "memory": "128Mi"
              }
            }
          }
        },
        {
          "serviceId": 2,
          "serviceName": "nodered",
          "imageName": "nodered/node-red:latest",
          "config": {
            "image": "nodered/node-red:latest",
            "ports": ["1880:1880"],
            "volumes": ["nodered-data:/data"],
            "environment": {
              "TZ": "UTC",
              "NODE_RED_ENABLE_PROJECTS": "true"
            },
            "restart": "unless-stopped",
            "resources": {
              "limits": {
                "cpu": "1",
                "memory": "512Mi"
              },
              "requests": {
                "cpu": "0.5",
                "memory": "256Mi"
              }
            }
          }
        },
        {
          "serviceId": 3,
          "serviceName": "influxdb",
          "imageName": "influxdb:2.7-alpine",
          "config": {
            "image": "influxdb:2.7-alpine",
            "ports": ["8086:8086"],
            "volumes": ["influxdb-data:/var/lib/influxdb2"],
            "environment": {
              "DOCKER_INFLUXDB_INIT_MODE": "setup",
              "DOCKER_INFLUXDB_INIT_USERNAME": "admin",
              "DOCKER_INFLUXDB_INIT_PASSWORD": "iotistic42!",
              "DOCKER_INFLUXDB_INIT_ORG": "iotistic",
              "DOCKER_INFLUXDB_INIT_BUCKET": "sensors"
            },
            "restart": "unless-stopped",
            "resources": {
              "limits": {
                "cpu": "1.5",
                "memory": "1Gi"
              },
              "requests": {
                "cpu": "0.5",
                "memory": "512Mi"
              }
            }
          }
        },
        {
          "serviceId": 4,
          "serviceName": "grafana",
          "imageName": "grafana/grafana:latest",
          "config": {
            "image": "grafana/grafana:latest",
            "ports": ["3000:3000"],
            "volumes": ["grafana-data:/var/lib/grafana"],
            "environment": {
              "GF_SECURITY_ADMIN_USER": "admin",
              "GF_SECURITY_ADMIN_PASSWORD": "iotistic42!",
              "GF_INSTALL_PLUGINS": "grafana-clock-panel,grafana-simple-json-datasource"
            },
            "restart": "unless-stopped",
            "resources": {
              "limits": {
                "cpu": "1",
                "memory": "512Mi"
              },
              "requests": {
                "cpu": "0.5",
                "memory": "256Mi"
              }
            }
          }
        }
      ]
    }
  }
}
